<div class="tree-node">
  @if (isLeaf) {
    <button
      mat-icon-button
      disabled
      id="leafBtn"
      class="tree-node__button__leaf"
    ></button>
  } @else {
    <button
      id="nodeBtn"
      (click)="toggleNode(node)"
      [attr.aria-label]="'Toggle ' + node.text"
      class="tree-node__button"
    >
      <mat-icon class="tree-node__button__icon" id="nodeIcon">
        {{ tree.isExpanded(node) ? "remove" : "add" }}
      </mat-icon>
    </button>
  }

  @if (node.favorite) {
    <app-nodelabel
      class="favorite"
      [node]="node"
      [searchValue]="searchValue"
      (contextmenu)="sendPosition($event, true, false)"
      [isEnabled]="isEnabled"
      (mousedown)="sendPosition($event, false, true)"
    />
  } @else {
    <app-nodelabel
      [node]="node"
      [searchValue]="searchValue"
      (contextmenu)="sendPosition($event, true, false)"
      [isEnabled]="isEnabled"
      (click)="toggleNode(node)"
    />
  }
</div>

<app-context-menu [node]="node" (menuAction)="onMenuAction($event)" />
